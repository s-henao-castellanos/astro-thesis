\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{astro-thesis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Language


% I hate using pdflatex, but xelatex is  too slow
\RequirePackage[utf8]{inputenc}
\RequirePackage[english]{babel}
\RequirePackage[T1]{fontenc}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% text

%\RequirePackage{lmodern}
%\RequirePackage{mathpazo} % old palatino package
\RequirePackage{amsmath,amssymb} % math
\RequirePackage{newpxtext} % Palatino body font
\RequirePackage{newpxmath} % Palatino math

\RequirePackage{relsize} % resize text
\RequirePackage{microtype} 
\RequirePackage{minted} % code in text

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Page options

\RequirePackage{anysize} % margins
\linespread{1.4}
\pagestyle{plain}
\RequirePackage[left=2cm,top=2cm,right=2cm,bottom=2cm]{geometry}
\RequirePackage{marginnote}
\RequirePackage{adjustbox}

\RequirePackage{multirow}


% graphics
\RequirePackage{graphicx} % \includegraphics
\RequirePackage{wrapfig} % in-text figures
\RequirePackage{float} % allows [H] on floats
\RequirePackage[width=0.9\textwidth]{caption} % captions do not span the whole line
\captionsetup[figure]{font=small,labelfont=small}
\usepackage{sidecap} % side captions for figures and tables
\sidecaptionvpos{figure}{t} % side captions at the top

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% references and bibliography
\RequirePackage{xcolor}
\definecolor{purple}{rgb}{0.3,0.0,0.5}
\RequirePackage[colorlinks=true,allcolors=purple]{hyperref}
\providecommand*{\listingautorefname}{Listing}
\RequirePackage[semicolon,round,sort&compress]{natbib}
\RequirePackage{csquotes}
%\RequirePackage[hyphenbreaks]{breakurl} % does not work on pdflatex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TOC
\RequirePackage[titletoc]{appendix}


%%%%%%%%%%%%%%%%%%%%%%% math definitions 
\RequirePackage{bbm}
\newcommand{\I}{\mathbbm{i}}
\renewcommand{\d}{\,\mathrm{d}}



%\numberwithin{equation}{section}
%\numberwithin{figure}{section}
%\numberwithin{table}{section}

%%%%%%%%%%%%%%%%%%%%%%%%%%
% visible paragraph notes
%%%%%%%%%%%%%%%%%%%%%%%%%%


\newif\ifvisibleintent

\newcommand{\intent}[1]{
	\ifvisibleintent
	\reversemarginpar\marginnote{\tiny #1}
	\fi
	}
	
	
%%%%%%%%%%%%%%%%%%%%%%%%%
% A&A bib tweaks
%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{twoopt}
% taken from https://www.aanda.org/for-authors/latex-issues/references
\bibpunct{(}{)}{;}{a}{}{,} %% natbib format for A&A and ApJ

\makeatletter
\newcommandtwoopt{\citeads}[3][][]{\href{http://adsabs.harvard.edu/abs/#3}%
{\def\hyper@linkstart##1##2{}%
\let\hyper@linkend\@empty\citealp[#1][#2]{#3}}}
\newcommandtwoopt{\citepads}[3][][]{\href{http://adsabs.harvard.edu/abs/#3}%
{\def\hyper@linkstart##1##2{}%
\let\hyper@linkend\@empty\citep[#1][#2]{#3}}}
\newcommandtwoopt{\citetads}[3][][]{\href{http://adsabs.harvard.edu/abs/#3}%
{\def\hyper@linkstart##1##2{}%
\let\hyper@linkend\@empty\citet[#1][#2]{#3}}}
\newcommandtwoopt{\citeyearads}[3][][]%
{\href{http://adsabs.harvard.edu/abs/#3}
{\def\hyper@linkstart##1##2{}%
\let\hyper@linkend\@empty\citeyear[#1][#2]{#3}}}
\makeatother
% taken from aa.cls
\newcommand*\aap{A\&A}
\let\astap=\aap
\newcommand*\aavso{AAVSO}
\newcommand*\aapr{A\&A~Rev.}
\newcommand*\aaps{A\&AS}
\newcommand*\actaa{Acta Astron.}
\newcommand*\aj{AJ}
\newcommand*\ao{Appl.~Opt.}
\let\applopt\ao
\newcommand*\apj{ApJ}
\newcommand*\apjl{ApJ}
\let\apjlett\apjl
\newcommand*\apjs{ApJS}
\let\apjsupp\apjs
\newcommand*\aplett{Astrophys.~Lett.}
\newcommand*\apspr{Astrophys.~Space~Phys.~Res.}
\newcommand*\apss{Ap\&SS}
\newcommand*\araa{ARA\&A}
\newcommand*\azh{AZh}
\newcommand*\baas{BAAS}
\newcommand*\bac{Bull. astr. Inst. Czechosl.}
\newcommand*\bain{Bull.~Astron.~Inst.~Netherlands}
\newcommand*\caa{Chinese Astron. Astrophys.}
\newcommand*\cjaa{Chinese J. Astron. Astrophys.}
\newcommand*\fcp{Fund.~Cosmic~Phys.}
\newcommand*\gca{Geochim.~Cosmochim.~Acta}
\newcommand*\grl{Geophys.~Res.~Lett.}
\newcommand*\iaucirc{IAU~Circ.}
\newcommand*\icarus{Icarus}
\newcommand*\jcap{J. Cosmology Astropart. Phys.}
\newcommand*\jcp{J.~Chem.~Phys.}
\newcommand*\jgr{J.~Geophys.~Res.}
\newcommand*\jqsrt{J.~Quant.~Spectr.~Rad.~Transf.}
\newcommand*\jrasc{JRASC}
\newcommand*\jaavso{Journal of the American Association of Variable Star Observers}
\newcommand*\memras{MmRAS}
\newcommand*\memsai{Mem.~Soc.~Astron.~Italiana}
\newcommand*\mnras{MNRAS}
\newcommand*\na{New A}
\newcommand*\nar{New A Rev.}
\newcommand*\nat{Nature}
\newcommand*\nphysa{Nucl.~Phys.~A}
\newcommand*\pasa{PASA}
\newcommand*\pasj{PASJ}
\newcommand*\pasp{PASP}
\newcommand*\physrep{Phys.~Rep.}
\newcommand*\physscr{Phys.~Scr}
\newcommand*\planss{Planet.~Space~Sci.}
\newcommand*\pnas{PNAS}
\newcommand*\pra{Phys.~Rev.~A}
\newcommand*\prb{Phys.~Rev.~B}
\newcommand*\prc{Phys.~Rev.~C}
\newcommand*\prd{Phys.~Rev.~D}
\newcommand*\pre{Phys.~Rev.~E}
\newcommand*\prl{Phys.~Rev.~Lett.}
\newcommand*\procspie{Proc.~SPIE}
\newcommand*\qjras{QJRAS}
\newcommand*\rmxaa{Rev. Mexicana Astron. Astrofis.}
\newcommand*\skytel{S\&T}
\newcommand*\solphys{Sol.~Phys.}
\newcommand*\sovast{Soviet~Ast.}
\newcommand*\ssr{Space~Sci.~Rev.}
\newcommand*\zap{ZAp}
%\newcommand*{}[][]{}


%PASP




















\usepackage{lipsum}
\setlipsum{auto-lang=false}
\setcounter{tocdepth}{1}
\setcounter{secnumdepth}{2}


\renewcommand\thesubsection{\thesection.\Alph{subsection}}

\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator{\expit}{expit}
\newcommand{\PL}{\mathrm{Polylog}}
\newcommand{\Clausen}{\mathrm{Clausen}}
\newcommand{\arctanh}{\mathrm{arctanh}}
\newcommand{\B}{\mathrm{B}}
\renewcommand{\Re}{\mathrm{Re}}
\renewcommand{\Im}{\mathrm{Im}}
\renewcommand*{\mod}{\,\mathrm{mod}}
\newcommand*{\cmod}{\,\mathrm{cmod}}

\usepackage{array}   % for \newcolumntype macro
% math-mode version of column types
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{R}{>{$}r<{$}}


\usepackage{anyfontsize}

\usepackage{pdflscape}






